<div ng-controller="epa-details-controller">
  <div class="container-fluid">

    <div class = "row">
      <div class="col-xs-12 col-md-10 col-md-offset-1">
        <button type="button" id="headerHelp" class="glyphicon glyphicon-info-sign btn btn-link" data-toggle="modal" data-target="#helpModal" ng-click="displayHelp($event);"></button>
        <h2 align="center">EPA {{epa}} - {{epaDetails.title}}</h2>
        <h4 align="center">You are currently at an EPA mastery level of {{mastery}}.</h4>
        <div align="center" ng-if="deltaArrow == 'up'">
          <span class="glyphicon glyphicon-arrow-up" style="font-size: 100px; color: #388E3C;"></span>
        </div>
        <div align="center" ng-if="deltaArrow == 'down'">
          <span class="glyphicon glyphicon-arrow-down" style="font-size: 100px; color: #D32F2F;"></span>
        </div>
        <div align="center" ng-if="deltaArrow == 'even'">
          <span class="glyphicon glyphicon-sort"  style="font-size: 100px; color: #F9AE1D;"></span>
        </div>
        <h4 align="center">{{deltaText}}</h4>
      </div>
    </div>

    <div class = "row block">
      <div class="col-xs-12 col-md-10 col-md-offset-1">
        <button type="button" id="examHelp" class="glyphicon glyphicon-info-sign btn btn-link" data-toggle="modal" data-target="#helpModal" ng-click="displayHelp($event);"></button>
        <div class = "row">
          <div class ="col-xs-12 col-md-6" style="padding-top: 30px;">
            <div id="line-chart" style="padding-top: 2%;"></div>
          </div>
          <div class ="col-xs-12 col-md-6">
            <h3 align="center">Your Recent Assessments</h3>
            <table class="table test-data">
              <tr ng-repeat="test in testInfo">
                <td class="test-name">
                  {{test.title}}
                  <br>
                  {{test.examdate}}
                </td>
                <td class="test-score">
                  {{test.newval}}
                </td>
                <td class="test-delta">
                  <div ng-if="test.delta == 'up'">
                    <span class="glyphicon glyphicon-arrow-up" style="font-size: 20px; color: #388E3C"></span>
                  </div>
                  <div ng-if="test.delta == 'down'">
                    <span class="glyphicon glyphicon-arrow-down" style="font-size: 20px; color: #D32F2F"></span>
                  </div>
                  <div ng-if="test.delta == 'even'">
                    <span class="glyphicon glyphicon-sort" style="font-size: 20px; color: #F9AE1D;"></span>
                  </div>
                </td>
                <td class="test-comment">
                  <button type="button" class="glyphicon glyphicon-envelope btn btn-link" data-toggle="modal" data-target="#examModal" style="font-size: 15px;"></button>
                </td>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- <div class="flex-container">
      <div class="flex-item">
        <button type="button" id="examHelp" class="glyphicon glyphicon-info-sign btn btn-link" data-toggle="modal" data-target="#helpModal" ng-click="displayHelp($event);"></button>
        <div id="line-chart" style="padding-top: 2%;"></div>
      </div>

      <div class="flex-item">
        <button type="button" id="examHelp" class="glyphicon glyphicon-info-sign btn btn-link" data-toggle="modal" data-target="#helpModal" ng-click="displayHelp($event);"></button>
        <h3 align="center">Your Recent Assessments</h3>
        <table class="table test-data">
          <tr ng-repeat="test in testInfo">
            <td class="test-name">
              {{test.title}}
              <br>
              {{test.examdate}}
            </td>
            <td class="test-score">
              {{test.newval}}
            </td>
            <td class="test-delta">
              <div ng-if="test.delta == 'up'">
                <span class="glyphicon glyphicon-arrow-up" style="font-size: 20px; color: #388E3C"></span>
              </div>
              <div ng-if="test.delta == 'down'">
                <span class="glyphicon glyphicon-arrow-down" style="font-size: 20px; color: #D32F2F"></span>
              </div>
              <div ng-if="test.delta == 'even'">
                <span class="glyphicon glyphicon-sort" style="font-size: 20px; color: #F9AE1D;"></span>
              </div>
            </td>
            <td class="test-comment">
              <button type="button" class="glyphicon glyphicon-envelope btn btn-link" data-toggle="modal" data-target="#examModal" style="font-size: 15px;"></button>
            </td>
        </table>
      </div>
    </div> -->

    <div class = "row">
      <div class="col-xs-12 col-md-10 col-md-offset-1">
        <button type="button" id="checklistHelp" class="glyphicon glyphicon-info-sign btn btn-link" data-toggle="modal" data-target="#helpModal" ng-click="displayHelp($event);"></button>
        <h3 align="center">EPA {{epa}} Checklist</h3>
        <ul ng-repeat="criteria in epaDetails.criteria">
          <li class="detail-li">
            {{criteria.mainCriteria}}
            <ul ng-repeat="sub in criteria.subCriteria">
              <li>
                {{sub}}
              </li>
            </ul>
          </li>
        </ul>
      </div>
    </div>

  </div>

  <div id="examModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Exam 1 Comments</h4>
        </div>
        <div class="modal-body">
          <div>Greetings</div>
          <div>Link to exam.</div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <div id="helpModal" class="modal fade" role="dialog">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Help</h4>
        </div>
        <div class="modal-body">
          {{helpText}}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

</div>
